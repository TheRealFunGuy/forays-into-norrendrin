must do before release:
"The troll on the floor regenerates" <--out of sight
bug: monsters don't take fire damage from burning if they're frozen, paralyzed, afraid, etc.?
hold up! do arrows only go 11 squares, but target as 12?
bug: "the goblin puts out the fire" when not visible
really need to fix LOS reciprocity so that stuff targets correctly, especially range 2 stuff.
bug: once you set a melee spell, you can't unset it. easy fix.
bug: you can't fire at adjacent targets, but you can target right behind them -_-
remove burning from quickfire trap...
consider reworks for: scarecrow, poltergeist, frostling, dream warrior, zealot, killer, ALL CASTERS, behemoth
-consider buffing HP of every monster above level 4 or so.
stone golem turns to lots of rubble?
skulking killer only slows?


#


invisibility. you get a crapton of bonus stealth for a few turns. high level!
	-maybe. or maybe just an item.
	-only works in darkness? this would be the same as the monster ability, then.
-smoke bomb. smoke blocks LOS and gives 50% miss chance.

considering a 'slimed' status that would put out fires but leave you clumsy or something. fire melts ice, ice freezes slime, slime douses fire. slime traps, slime enemies, slime orbs that you can employ to extinguish fires on yourself.
	-being on fire makes you immune to freezing, being frozen makes you immune to slime, and being slimed makes you immune to burning? sounds decent.
	-then i would add slime orb and orb of burning at the same time.


             
             Do what now?
                           #####
HP: 69                   ###...####       ############
Depth: 1                 #........#       #..........######
---                   ####........#       #...............#
Mace                  #...........#     ###..........####.#
---                   #.##........#      .................#
Leather               #.##........#       #..........##.#.#
---                   #.##........#       #..........##.#.#
             ##########.####.#.####   #########.##.####.#.#       #############
[paralyzed-] #........#.####.#.#      #....#  #...........#########...........#
[-stunned--] #....0............#      #....####.##.####.####......#.###.#.### #
[-burning--] #........#.####.######## #...................##..................#
[--afraid--] #........#.............# #.0..####.##.####.#.##......#.###.#.#####
[--slowed--] #^.........####.######.# #.........#  #  #.#......>........#.#
[--shine---] #........###  #.#    #.# #....######     #.####......#####.#.#
             ##########    #.#    #.# ###.##          #.#  ##.##.##  ##.#.####
                           #.#    #.#   #.#        ####.#  ##.##.#####.......#
                           #.######.#####.######   .....####.........#.......#
11                         #...................       #.@.......0..0.........#
12                         ####.###.##.##.#.####      ######.........#.......#
13                            #.............#              ###################
14                            ###############
             Depth: 1
---
(removed XP, level, and AC)

it's a stretch, but there might be room for EIGHT statuses at once. that ain't bad; let me see if I can reasonably get more than 8 at once...

conviction
boiling blood
regen
resistance (+immunity?)
detecting
counter for fail rate, sure.

[regenerate]
[-poisoned-]
[--frozen--]
 or
[-immobile-]
[--dimmed--]
[dim-light-]
[conviction]
[invincible]
[bloodboil-]


#

a status effect that affects combat but not movement? right now it's just Stun.
	-need an ice trap for new 'frozen' status

mechanical knight or something:
  -becomes vulnerable only when it misses
  -has 2 or 3 hp, but loses only 1 at a time "the clockwork knight's arms fall off!"
	-"the clockwork knight kicks you!"
	-"the clockwork knight misses you and is off-balance!" "you hit the clockwork knight. the clockwork knight's legs fall off!"
  -kinda exists only to make the staff ideal for ONE guy. is this acceptable?
	-oh wait. let's have crits take off 1hp, too, so you might use a dagger too.



statues when light is on them
monsters you can only see in direct light
fungus killed by light
darkness dweller repelled, dazed, or blinded by light (for a few turns)
doors(stone slabs) that open when lit
sunlight - have it destroy monsters that are weak to light.
Shine spell might turn your torch to sunlight.
lit rooms, or torches, or whatever. of course.
fire vents (or firespouts, or something) that occasionally burn things on top of them and give off more light than firepits.

change to light trap - make alarm a separate trap.
potion of brutish strength <-no items, spells, certain feats, but tons of damage and ability to smash statues, doors, other features

bombable walls and (orcish?) grenades. some hidden rooms would be behind them.
make sure to always consider the old stuff when adding new stuff - it can use updates too, or receive some of these new ideas.


make sure there's a light-sensitive feature early on.


should all crits stun?
	-while i'm at it, fix the pillar dance abuse.
		-pathfinding at distance 2?

some monsters need to carry items.
when targeting a burst effect, the radius should be shown...somehow.
when targeting Lunge, you should be able to lunge if the tile next to you is a wall. (use alternate targeting lines)
rethink 'all is still and silent'
change feat list to only include ones you've learned? but what about the letters?



decide which changes should go into 0.7.0!
probably split all these into 0.7.0 and 0.8.0.
then 0.9.0 can have special levels, and 1.0.0 will be the final iteration.
	-well, so far i have:
		new map gen
		new monsters
		new items
		new terrain
		shrines
		other 'light' features, including tweak to Shine
		other balance changes(crits stun, monsters have items)
		sidebar counters and stuff. for increasing bars like Conviction, or brogue-style bars for other durations.
		save + load, because players probably like saving their games.
		and help check
#

probably not going in: different trap triggers.
an alarm trap might be tied to an item or a door
a stun trap would probably be a proximity trap, pressure plate, or even periodic.
a grenade trap would be proximity/plate only
sliding wall would probably be proximity/plate.
teleport would be?

#
things to do between 0.5 and 1.0:

at least 1 special level per game, with an appropriate number of different special levels
	-cave of bats

animations should support the concept of a 'viewer' - cells outside viewer's FOV don't animate.

generate trolls with rocks they can throw, in a lair, and have them stay in that lair.

consider making ranged attacks...not attacks at all, but generated straight from the AI routine

should group monsters regroup when they can't see the player?

should dream warrior teleport straight to target_location in seekAI?

replace old spell?
	-should be easier with shrines!

shadow should reduce the light radius of zealots, too

if the line is blocked while targeting, perhaps the alternate line could be considered.

Select() needs a rewrite, and to be moved out of Actor.

0.7.0 should have: (focus on gameplay)
a weak enemy that, upon death, lights the surroundings.
add more numbers to the equipment screen
there's a good reason to make animals act more realistically
	-no, having them avoid the player would be kinda bad for gameplay.
		-just make them notice the player more often, because THEY don't carry items.
try --- over ~~~ again
(most) monsters need to wander, somehow.
many effects should use the new 'RefreshDuration', including shadow's touch attack, etc etc.
"the arrow hits the goblin" x2   should become "the arrow hits something" x2 "something dies"
weird: there might be something strange happening in the buffer, with extra [more]. for instance, "You attempt to break free. You attempt to break free. You [more] --> break free! [more] ...this could use some debugging.
bug: cultist was in solid rock. this WAS using the wizmode 'jump to next level', and this hasn't been reproduced yet.
not being able to target a wall you can see mid-corridor is crappy. change it.
	-at LEAST use a FirstTileInLine method
		-this would let you target far into the darkness, too.
"You are burned. You are unburnt." <--being attacked by burning enemy while Tough
goblin shamans shouldn't re-immolate you EVERY turn, probably.
think about scaling Spirit's duration reduction to more than 50%
luminous avenger: fast, holy shield, gives off light. when injured, darkens the level to fully heal.
crusading knight: strong attack, heavy armor, & torch. if attacked from hiding, lights the level.
a few more open areas! chances to use lightning bolt, and take advantage of the full 12 spaces range.
	-borrowing brush from LoL would be neat even if it doesn't make sense.
undead animal?
"You drain your magic reserves / Your magic feels weaker / You feel drained" when casting higher-level spells.
oh, hey, necromancers should probably not use melee attacks so often.
what about a 'default ranged attack' in addition to the 'default melee attack' spell?
corpsetower behemoths: they either need a way to reach the player(meh) or they need to be REALLY nasty. they already do tons of damage, it's true. do they need anything else?
	-maybe they get the earthquake slam (3 tiles high, in a line)
		-no, just make their melee attacks stun automatically
remove the 'g'et command and the 'o'pen command, relying instead on autopickup and auto-open? what about 'c'lose, then?
bats shouldn't 'walk' into you if they don't see you
more than one line for messages!
fire drake should come with a quickfire event
is the minimum number of enemies really 4? eww, too low.
...just...just remove scarecrows and poltergeists if they're not interesting. but instead, make them interesting!
	-give poltergeists an identity as item-throwers. remove the crap messages, remove the shriek,
	 and make them yank items from the player's pack sometimes.
mud monster that makes walls grab at you, dazing trap that uses LOS
	-periodic dazing trap? when I have a 'viewer' for animations, yes.
antimagic enemy
an enemy that teleports you away under some circumstances
another bow-user
another trap that makes spirit useful
and seriously, i need an enemy that does tons of damage at range, but doesn't go down easily.
that accuracy-affecting thing should happen, whether it's fog or gas or blinding/dazing. it works well with Conviction.
an enemy with armor (besides the mechaknight)?
rework skulking killer
a stealth enemy that can teleport from shadows on ONE side of you to shadows on the OTHER side, and re-stealth while doing so.
	-limited somehow. does he need to escape first?
a 'duelist', sort of an upgrade to the bat: after attacking, often moves to another adjacent tile. sometimes moves back or lunges.
	-but this isn't very interesting at all yet. scrap it unless there's something more to add here.
a group enemy that slightly punishes fighting in corridors?
an enemy that breaks Frenzy(conviction?) somehow. burst knockback on death?
update help files - add more description to feats and such.
support for multiple sub-tile elements, such as quickfire, traps, troll corpses, grenades, slime...
slime-trail-leaving group enemies. (slugmen?)
make dark gray unseen tiles by default, and remove option. much easier to see.
autopickup while autoexploring would be nice
things other than the player should be able to call MakeNoise
generate rats at start.
extend the "monster notices" sounds so that you can hear them even if you can't see them.
	-this would make a good candidate for generalization: printing a message if the player can see an object OR if that object is within a certain distance. perhaps a distance that implies that the message is a sound, not a visual.
generate some doors
make stun traps nastier. add at LEAST one more damaging trap. make light trap rarer? (well, just adding more does that.)
killers should search for you
orb of darkness...would put out lit rooms, torches, fire pits, and torches held by the player and monsters.
	-add messages for "You take out your torch, but it gives off no light!" and the wizlite one too
kills list
make shadows appear earlier? make swordsmen appear earlier(maybe?)?
there is no '?' for help on the "learn which spell?" screen. fix this.

levelup screen - '?' on skill selection should go to skill help.
no 2nd wave of light if already wiz_lit

beamos-inspired mob OR trap
	-but mounted in the wall.


bugs: 
using lunge on an aware goblin archer a knight's move away. the archer appears normal, when it should have a green background from the targeting.
	-i believe this is another form of the other background color bug.
	-linux or win?
	-does not happen every time. this one might be a pain to track down.
again on linux - bits of the previous map still appear. no idea why. does not happen often. (once so far!)
	-not reproduced yet
there still might be a bug related to being on fire and catching fire at the same time.
	-not reproduced
"The skeleton looks less disoriented. " - no skeleton in sight.
	-reviewed code. should never happen, but it did.
		-theory: it died and the message was still printed. rework removal from msg_obj list.
			-happened again with "the skeleton looks more stable". debug the trap messages, then do the msg_obj fix.
stalagmites, because they are solid, leave UNLIT tiles next to fire pits. simple enough to check as a one-off hack.
lashers can still move somehow, probably by pathing.
	-not reproduced
"You fire an arrow. The arrow hits the cultist. The cultist [more]
dies."
	-note that the [more] takes up exactly as much space as "dies. " - what gives?
tumble + autotarget bug
GOTCHA. somewhere, I'm using ReadKey() instead of ReadKey(true) - i think it's in buffer. that is the cause of those border letters.


things to consider for design:
active dungeon elements



--generate the list of monsters first, THEN generate the level. then verify that i.e. a troll has a proper lair.
	-now i'm not sure i want trolls to be confined

poltergeist: spawns as an event with a certain area, sometimes an entire room.
effects:
opens and slams doors in its area
throws items in its area at the player
shrieks loudly to call nearby monsters
laughs(no effect)
if the player sticks around, it'll manifest, after which it occasionally laughs and moves around?
	-this can be made much more complex
		-it would also move away occasionally


cultist
	-something for cultists to summon - this should be on a special level though, and it would be badass.
		-summoning circles and all
poltergeist (uncommon)
	-throws objects, slams doors(which the player will hear and investigate), shrieks, ...
	-if you stay in its area for a certain amount of time, it manifests:
		-gray or green 'G'
		-i want it to retain some of its annoying qualities. perhaps a short period of time where it moves randomly and
			is hard to hit or damage for some reason. oh, it should laugh while doing this of course.


room mimic
	-how is this going to work? perhaps it's usually generated at the end of a longish corridor, so blinking out is harder to do.
	-it shouldn't ACTUALLY prevent teleportation escapes, though. a quick Passage out is probably just the thing.
	-perhaps some kind of interactive 'don't stand here' thing.
	-so, the event checks every several turns to see if the player is within its area(which is the entire room)
	-if this happens, it either sets some state, or spawns another event type to check again a few turns later(remember, there's a chest in here)
		-how about a good chance of an extra item or two, as well?
			-EITHER 1d3 items OR a chest?
		-wait, why not trigger on the chest, also? both will work great.
	-when the mimic has been disturbed, a message is printed, the membrane/door starts to close, and acid starts to fall.
		-and some of the walls and floor turn to red?
	-i think the average distance from chest to door will be like 3, so probably 2d2 turns.
	-if the player is on the door when it closes, he takes some damage and becomes immobilized. (and can then escape)
	-otherwise, the door becomes a membrane (would be great if certain terrain had ATTACKABLE flag, yeah?) with an okay amount of HP.
	-all the while, every 1d3 turns acid drops onto the floor from the ceiling - this is delayed by 1 turn, so it doesn't hit the player directly.
		-lasts for 1d3+3 turns or so
	-standing in the acid deals damage, of course.
	-ALSO, to prevent the player from simply dancing around until he gets out...the room should probably either shrink, or be subject to an area attack.
		-a crushing attack is way easier. lowish damage, i suppose.
	-annnnd, when the player escapes, the membrane soon returns to its door form and the walls and floors to their normal colors.

	-first, i need terrain for acid and membrane, no problem.
	-and an event for 'spawn acid here', no prob
	-now, what state do i need to track? the event already tracks the area, no problem.
		-'player inside room' - the first trigger. unneeded if i trigger only on the chest.
		-state for 'disturbed', of course
		-'number of turns until membrane closes'
		-state for membrane: closing, crushing, closed.
		-'number of turns until next acid attack'
		-'number of turns until next crushing attack'
		-'membrane has been destroyed' - could also just mean it's dead, and remove the event.

idea for the cultist's special level: a receptacle fills as cultists die to fire damage. you don't want it to fill up.
idea for pangolin special level: giant pangolins tear open giant termite mounds. the pangolins use their armor to avoid harm as the termites swarm you.

voltaic rapture was too badass
-this spell wasn't voltaic rapture, but was lightning-based: each time you're hit in melee you release a radius 2 burst of electricity
