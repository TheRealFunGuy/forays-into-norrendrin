

and, i think that nonaggressiveness will be handled in inputAI() - instead of a simple CanSee check, it'll check distance+damage+etc, so it'll remain wandering or idling or whatever instead of activeAI() being called.


rework Select again, using that cool property thing that returns "this" after setting the thing.

flint & steel to start with.
 - maybe starts with 3 charges. each use has a 20-50% chance to remove a charge. You pick a direction and it applies fire. (doesn't do anything to monsters unless they're covered in oil)

how are bandages changing? just really slow regen? does it depend on whether you're taking damage or not? if it's just really slow, that encourages hiding & waiting. hmm.

aggressive monsters should rush across the dungeon if they see the player in light.

somewhat aggressive monsters should attack at range 12. (probably the default)
-'normal'?

nonaggressive monsters should attack at range 3 or when attacked.

aggressive: goblins, kobold, cultist, banshee?, warg, warmachine?, hulk
normal: (everything else)

nonaggressive (one or the other): bat, wolf, cobra, dart frog, boar, 

special: moth, all immobile monsters




re: tripping and knockback, two questions.
one, what effects care whether a monster is colliding with or touching the floor? fire doesn't.
two, if any of these effects exist, should they happen when the monster dies anyway?
	(although it seems like it'd be crappy to have flying monsters fall on potions when they die)


knockback questions:

a burning thing flying over flammable terrain sets it on fire.
 does this apply to scrolls too?
 does this melt ice too?
 does flying through fog remove that fog?
 does flying through poison gas extinguish the fire?


make sure spore pod doesn't take damage from knockback

what does the fire event need to do?

it needs to exist for every tile o' fire.

it needs to last for at least X turns unless extinguished, and have a chance to spread every turn until it goes out.

(does the event catch things on fire & deal damage & all that stuff, or does movement trigger that? well, should being knocked through fire set you on fire?)



warmage needs to use detect movement:
ignore stealth if the player moved. "the warmage senses your footsteps"
so, the warmage will still need to be within sight range before blasting the player.
-specifically, if the player moved 

should fire arrows act like firebolts and catch stuff on fire? including burning scrolls? i think so.


necro should flee if all its minions have been summoned but none are in sight.
	-this might work, but also maybe the necro should summon small groups.
		or, 1-2 zombies or 2-4 skeletons at a time.
	-or a short cooldown WITH a much longer one?


which monsters are changing their behavior?
golem maybe

consider displaying danger differently once you've already been spotted.

any seek or idle routines for new monsters?



warmage now casts detect movement every ~X turns, to give 50-60% coverage, unless its mana is too low.

'infested mass'
slither movement or no?
-a roiling mass of filth and debris that is also filled with bugs. shrinks away from light but moves quickly in darkness.



MONSTERS:
'beach ball bloats': take bloats from brogue and make them a bit tougher by having bashing attacks send them flying instead of popping.

desired changes:
golem: what if it created stalagmites when struck, too, and could also
  move through(and destroy) them? it'd make kiting harder.
	-also consider reducing radius of rubble on death
assassin: better AI. another ability? or is it not needed? poison?
	-just make the message "the assassin silences you"
lasher: perhaps a few tweaks to behavior
  as well. what if the radius started small and grew as you attacked?
  what if it grew only for consecutive attacks? what if it could
  eventually paralyzed instead of stunning?

if spores stunned & poisoned for like 20 turns they'd be pretty nasty.
so, what about making spores a gaseous feature type?
they might even catch fire...would they interact with fog, poison, pixie dust?
anyway, then spores could last for longer than the other types. The lasher would put some out when it got hit, so hitting it frequently would fill a lot of space with spores.

there's also the possibility of having "dense spore cloud" and "spore cloud" to model expansion a bit better. how would those work?
-perhaps spore clouds are allowed to disappear normally, just like other gases, but dense clouds have a strength. they use the gas placement method but only try a few times, not 50, which restricts expansion to 1 or 2 tiles away - or, the number of tries is based on the strength. if it places a new tile of gas, strength--. otherwise, there's still a chance that the strength will go down, so a single dense cloud in a room will eventually go away.
when strength is 1, it replaces itself with a normal cloud.





-update old spells
-implement new monsters
-update old monsters
-finish knockback
-implement new level types
-implement various effects like equipment statuses, silence, etc.
-update old feats
-change endgame

and/or

animal nonaggressiveness & such
knockback & fire & interactions & stuff
remaining level types & new elements for them




consider making holy shield actually catch you on fire

idea for vents: make them put out gas for more than one turn at a time, to get a proper "expanding cloud of gas" feel.



and, i think that nonaggressiveness will be handled in inputAI() - instead of a simple CanSee check, it'll check distance+damage+etc, so it'll remain wandering or idling or whatever instead of activeAI() being called.



 1: goblin bat wolf moth dweller bramble frostling
 2: swordsman dreamwarrior cobra kobold sporepod forasect poltergeist
 3: cultist archer shaman dartfrog skeleton shadow mimic
 4: spider zombie zealot slug demon banshee hag
 5: berserker direrat killer boar troll dreamsprite cloude
 6: ascetic duelist warg transcendent crawler sabertooth mechknight
 7: battlemage soldier scout golem mude flametongue entrancer
 8: ogre grenadier pixie cknight bloodwitch hulk marblehorror
 9: cryolich pyren BLANK sentinel worm lasher vampire
10: warmage necro webstrider assassin avenger behemoth warmachine


what would a web terrain type do? flammable, check. immobilizes you when you step in (or get knocked in), check. for how long? dependent on damage like FROZEN?

so, you can see through it and walk through (into) it. when attempting to move, an actor checks for webs preventing movement. Maybe a 1/3 or 1/2 chance to break free? should oil and slime also destroy webs, just because?
(and slimed & oil-covered actors don't get stuck? maybe?)
-maybe you can 'o'perate to remove webs? (and breaking free doesn't prevent movement on that turn, of course)


warmage now casts detect movement every ~X turns, to give 50-60% coverage, unless its mana is too low.

make poison gas extinguish fires.


complete the knockback stuff started in PhysicalObject.

if you're on fire and knocked into oil, it'll turn to fire - should this refresh your burning duration?

Into slime, you'll be slimed instead of on fire. Onto ice, it'll melt.

sliding through slime should slime you; sliding through oil should grease you. being slimed or greased doesn't affect how you're knocked back.
	-or, sliding through those should have a CHANCE, per tile.

perhaps you can de-slime yourself by standing still for a turn. (oil too?)



rubble: affected by knockback or explosions? Probably only explosions. unsure.
cracked wall: knockback & explosions
items on the floor: potions & orbs interact with knockback & explosions
	-and potions also break when thrown or when something lands on them.

some basic "ground" types that interact with fire("can't put out fire"), noise("crunches when walked on"), etc.

oil: obviously interacts with fire, but what about walking on it?
		-how about "movement fails 1/3 times. attacking can make you fall. if you're knocked into a slippery
			cell, you keep going." - this is decent to start with.


-so basically, if burning normally lasts for ~X turns, oil adds another ~X turns to the duration, whether the oil or the fire is applied first.


tall grass/brush, plus any other plant terrain types: interactions with fire? anything else?
(also jungle, poppies, vines, possibly dense foliage, fungus patches, blast fungus, 



 -if you target a wall or other solid (non-door) tile with force palm, YOU should get knocked back. useful with ice etc.


glacial blast at 4, too, if it gets its bonus damage (or slow).
	-does it need something, or is it okay where it is?
amnesia moved to 4 and buffed so it stuns/staggers/sleeps for a few turns
shadowsight might be moved to 4, and get a longer duration

fire blitz would be the last tier 5 spell, except that it's gonna replace force beam, so there's still a spot open.
 - charge forward 8 tiles (target line, not location), leaving a trail of fire. releases a burst of fire (radius 3-5?) that ignites everything when you stop. if you hit an enemy, it gets knocked back several tiles.

hive is taking a little extra time to generate for some reason.


humanoid intelligence lets monsters open doors and have items to drop. (the fire interaction should be removed)
magical drowsiness: each turn you're not in combat, you have a 1/3 chance of falling asleep for several turns.
	-kinda meh, right?
asleep: you can't see anything but yourself. damage (or combat?) wakes you up. loud noises should wake you up too maybe?
	-or maybe not (for the noises)

	fiery arrows
	-should also burn on crit, whee
	 -more like should ALWAYS set you on fire, and immobilize you on crit as usual.


first, anything that resisted slashing will have a chance to dull bladed weapons instead, by checking explicitly.
bloats will check for maces.
mud elemental will check for NORMAL now, i think, since it resists all melee damage. (things like light sensitivity are NORMAL too - is this a problem?)
	-can now check for weapons directly, so do that.

infested: should it be every turn, or 1/2? 1/3? something else?

need a SLOWing or IMMOBILIZing version of firepits.

bandages should burn. disassembled traps should break when thrown.

rename belt of toughness? medallion of the iron heart?

also, monsters would usually not put out fire (perhaps a small chance to do so). If the player had other adjacent enemies, smart monsters would take time to put it out. or if the player is helpless...or maybe just if there are other nearby enemies? if LOS is blocked? (no...) rather than stepping into flammable terrain? 
	-maybe intelligent monsters only, and only if the player is occupied or helpless.


-broke save/load, of course
-realign descriptions for enchantments and magic items?
-all of the "check for troll corpses" code is going to need generalization to "set stuff on fire"
-add reminder to use shift if player presses '.' on stairs
-redo endgame
-add more possibilities to sliding wall traps. probably check dlevel, too, to scale properly.
	-chests, for sure. rare, but possible. (you shouldn't be able to pick up and reset sliding wall traps, though) (wait, why not? what's the benefit?)
-lit rooms, finally? <--currently implemented but they might need work
-if a monster inflicts Weak Point on crit, and the player's armor already has it, that monster should never crit, right? unless Worn Out checks for any crit.
	-just a matter of not printing the message.
-better animation for spores.
-add a lot more combat info to monster description boxes: speed, damage, "Melee effect:" or "On hit:", "Critical effect:", "Abilities:".
	-try to describe every monster in terms of "Abilities:". If it's not short enough to be readable, the monster might be too complex.
-now that there's so much room, add target health to sidebar. (but "corpsetower behemoth" doesn't fit! maybe use its symbol?)
-monsterdex, with a file to track which you've seen? maybe later.
-elemental damage removed from frostling, pyren, and drake. check balance.
-shadowsight improves chances to find hidden things in darkness. pretty sure it should also let you see what they are.
-"you try to break free" x5 is really awkward; change this.
-you see a goblin (damaged, unaware) <--add awareness, based on turns_visible or whatever, to lookmode.
-maybe fire geysers should hit more than just adjacent tiles - and less predictably!
-reduce fire geyser's light radius. it's effectively almost infinite right now.
-make sure NEVER_MOVE prevents all movement for everything.
-tutorial tips for stoneform, vampirism, probably roots, etc.
-flush input after more animations, especially passage. -- and bola!
-change "high pitched ringing" blah blah to "you hear an alarm" or "you hear an alarm from above the foo"
-statues could be 2 or 5. both are good.
-BUG! an ascetic caught fire from a quickfire trap. after it had gone out (???) he was hasted. clearly there's an extra Q1() somewhere.
-make sure potions break when thrown now
-perhaps all those LOS checks should actually be CanSee checks at the tile?
	-so you don't see messages for things happening far away in the dark.
-make sure fire spells all use ApplyEffect(FIRE)
-(looking at the code...) blizzard seems to go through walls and use raw name strings.
-noxious worms currently flee from poison gas
-making the player unable to see vents at first is actually kind of annoying.
-make sure frostling burst (etc) applies cold
-check spirit duration reductions for everything
-add new minions to entrancer list
-likewise, check for cool new phantoms (and symbol updates for old ones)
-berserkers don't die now for some reason. what did I change?
	-anyway, make their final rage last longer (axe swinging the whole time)
-make sure blast fungi can't appear in the player's LOS
-does waiting with '5' or '.' take (speed) or (100)? it should take (100), i think, to prevent cryolich blowouts.
-you currently get charged mana/exhaustion even if you cancel the spell. should this be changed?
-monsters should always wander after losing track of the player
-update copyright notices
-kobolds aren't quite done yet - Q5() doesn't work right with poison and fire etc.
-casters with no mana should act like their spells are disrupted (unless they can get more)
-consider brogue-style "traps don't block corridors" rule
-antimagic gas?
-auto-targeting for arrows etc. shouldn't consider detected monsters, only ones with LOS
-monsters seem to EITHER continue down corridors OR continue down paths after seeing the player (if the player ducks out of LOS). THEN they go to the target_location.
-let cloud e. and any other erratically moving monster also do so while wandering.
-perhaps a bigger penalty than -1 for each fork in the road when corridor-seeking?
-change message for "holy shield" to "fiery halo"
-what if dim vision just automatically returned false for cansee checks at range 2+?
-consider option to change out-of-fov color
-w5 probably shouldn't go forever because that makes you consume another keystroke. go back to ~20 turns.
-consider changing [t]orch off/on to just [t]orch
-there's still a bug where (i assume) fire doesn't update properly and leaves a dark area.
-IMMOBILE doesn't prevent teleportals yet. also check other forms of teleport.
-check all instances of someTile.Add(FeatureType.SomeFeature); replace with AddFeature.
-should the noxious worm jump through ANY thin wall?
-bug: "The grenade explodes! A noxious worm bursts through the wall! [more" <--the cursor was of course on the next row down, and the 'e' remained on the screen.
-make item and terrain descriptions appear in lookmode
-bump item frequency a little. 1 item per floor is a little low!

freeze slows after it wears off?
	-nonliving monsters immune to this slowing and also doubling freeze damage?


vampire + vampirism: light sensitivity is now "vulnerable while in the light".

"vulnerable" status now adds +5 to all damage sources


{HEALING,REGENERATION,STONEFORM,VAMPIRISM,BRUTISH_STRENGTH,ROOTS,SPEED,SILENCE,CLOAKING,BLINKING,PASSAGE,TIME,DETECT_MONSTERS,MAGIC_MAP,SUNLIGHT,DARKNESS,REPAIR,CALLING,TRAP_CLEARING,FREEZING,FLAMES,FOG,DETONATION,BREACHING,SHIELDING,TELEPORTAL,PAIN,BANDAGE};

consumable ideas:
still considering the potion of the third eye (name?) to replace ?oDM.
	-potion of dreams: you sleep for several(5-20?) turns, during which you detect monsters. awesome, but might be annoying if you can't examine them.
		-detection could last 1 extra turn for this reason.


-also, critical sneak attacks with arrows should also kill - but misses should alert enemies!


animals, probably: bat, wolf, dire rat, warg(?), spider, sabertooth(?), crawler(?), compy(?)
what about humanoids?: goblin, swordsman, dweller, dream warrior, cultist, archer, shaman, killer, zealot, ascetic, hag, berserker, crusading knight, entrancer, grenadier, duelist, pyren, assassin, warmage, necro

giant humanoids?: troll, ogre, troll seer

undead?: skeleton, zombie, shadow, banshee, poltergeist, vampire, sabertooth, behemoth

other?: moth bramble frostling mimic worm mudelemental marblehorror pixie golem mknight lasher avenger drake phantom



possible effects: double/max damage, stun, knockback, paralysis, %damage, reduce accuracy, reduce damage, increases damage taken, inflict Weak Point,
inflict Worn Out, refresh cooldowns, make noise, dim vision, poison, blind, summon phantoms (or clones...), teleport, freeze, hallucination, rubble (from floor or wall), fog, grow plants, defensive shell mode, aggro stance, berserk, grab, immobilize, link (allows attacking target at range), re-stealth, life drain, fear, spell disruption, steal, buff minions, burning, slow, sleep, possess weapon, swap positions, infested/red-hot/rusted armor, 

common effects: max damage, stun, knockback, increase damage taken, weak point, worn out

(maybe a general guideline of "crits get exclamation marks" ?)



magic items:
first, a list of possible effects. Most of them will have requirements and/or triggers, so these can be of varying power levels:
AOEs that trigger on damage, spirit form, fortification, glow when goblins/orcs are near, detect monsters within X pathing distance, if you're on fire and you attack it puts out the fire and deals more damage, sense (item type), (+one skill, -another skill), increase carrying capacity (not likely), orbs show surrounding area when thrown (?), blindsight (useful!), darkvision, 
(some action) might cost 0 turns, use bow at range 1, sometimes get flaming arrows (predictably, or more likely with a specific trigger)

when (requirement is met), negative statuses on your weapon might be cleared. (when you kill an enemy? with a crit?)

and possible restrictions/activation methods:
druidic (no metal equipment), standing still, 

and possible complete items:
x of focus (stand still to increase your melee accuracy on the next turn), x of evasion (chance to dodge spells and arrows if you moved last turn), fire cloak (prevents freezing), X of resist poison (blocks 1 poison damage), boots of gripping (no sliding on ice/slime/oil), stealth in brush(if not part of the terrain type already), haste when you leave brush, 


possessed status for weapons
 can force attacks. when and how? could be "when you hit an enemy with
 this weapon, you'll spend your next turn attacking again if possible"
OR
 "each turn you could attack an enemy while wielding this weapon, you
 have a chance to automatically do so"
	-no, too hard to determine.
OR
 take the mechanic from crawl: you can't move away until that enemy is dead.
OR
 attacking with it has a 1/X chance to hit you instead, where X is
 probably 3 or 4. (just deals base weapon damage. no crits or special effects)


quick observations about things that work really well in brogue that I don't have:
-terrain you can see (and ranged atk) through, but not walk on (chasm)
-terrain that changes as you walk through it (dense foliage)


add a tutorial tip for shininess if you're lit while wearing plate but with no torch

CHANGES:

MECHANICS:
global magic penalty (25% for those 2 Magic feats, 5% for advanced spells, added to all fail rates) is changed to exhaustion(probably still 25% for those 2 feats and 5% for advanced spells. Added to all fail rates, and also gives ...
so, exhaustion is always added to your fail rates directly (until there's a feat/magic item that changes that).
if exhaustion is at 100%, you miss half of your attacks outright.
at 75%, you can't effectively wear leather (you get no AC from it).
at 50%, you can't effectively wear chainmail.
at 25%, you can't effectively wear plate.
	-might still need a message for when you CAN wear your armor effectively again. but maybe not.

natural recovery nerfed (10->5) or removed entirely. 
	-let's remove it entirely. enduring soul will now do the same thing that recovery did.
	  (bandages might heal 10hp over 50 turns, or might be removed, or might heal 10hp over 20 turns but stop if you take damage)

possible combination of bosses and special levels. example: grab poison to buff yourself for fighting the boss, or just fight it. X levers that must be flipped, or items collected. Heavy use of minions and other 'smaller versions'.
	-"boss levels" will now be the penultimate level. the final one will be more puzzlelike, perhaps.

FROZEN should no longer remove control from the player. rather, it should take input as normal. '5' or '.' waits in place, and has a chance to reduce the amount (to prevent the player from sitting there forever for no reason). any movement or command makes you try to break out as normal. look, previous messages, etc. still work. make it a function and it'll actually be easy. This makes waiting for an enemy to break you out a valid option.

"X matters"

UI:
remove AC from main screen. main display now has HP, Depth, Weapon, Armor, Magic item. There are 3 empty spaces between this and the command list.
on equipment screen, armor should say "+2 to Defense skill" or "2 bonus Defense" instead of mentioning AC or vaguely mentioning "really good protection". weapons should no longer mention "2d6" as this is the default now.

FEATS:
all feats will now be comparable in power. feats are gained at skill level 1 and 6. you no longer need to master feats - as soon as you select one, you can use it. -this part is done.
specific feat changes:
 boiling blood: add another bonus when you're at 5 stacks.
 danger sense: only works on visible enemies. -CORRECTION: only works on enemies that you've seen, at any time.

TERRAIN:
healing pool: can throw an item in, too, so don't throw things at them. - probably not, actually.
quickfire becomes oil or napalm or something. traps and orbs throw a flammable substance around themselves, and then start
	a fire in the middle. (does it coat actors? how similar is this to slime?
blast fungus: explodes a few turns after being exposed to light. deals
               major damage. these should knock down adjacent walls,
               too, and probably instantly kill most enemies behind
               those walls. (~40 damage?)
			-actually, why not make it *crack* normal walls so
			 they can then be knocked through? nice.
stone slab: should now appear occasionally(!) instead of a normal door.
             opens when light hits it. (target tile is set to self)
what about a terrain type that blocks LOS/LOE, but retracts when anything is adjacent? inspired by brogue's plants of course.
some types of terrain are 1) cool and 2) can be used to trigger monster abilities, even if they don't do anything on their own. so add some!
what if trap corridors used an event to create all the traps at once? when the chest is opened? also, LOS could be blocked by walls partway down, too.
dim vision traps might need to go. they suck vs monsters and sometimes the player too.

ARMOR: probably change the way that armor affects stealth & magic. add several things that can affect your armor (some could even be good), like Infested, Rusted, Red-hot, Slimed, Blurred, Glowing, 
       then, think about things like electric vulnerability, not fitting through some spaces, catching on things, magnets - or, even better, jday's ideas of 'bonus if you didn't move', 'bonus increases as you move away from the one you attacked', 'bonus against range' (this one is probably an effect instead), 'damage is capped', etc.
       plus a few more: plate is shiny, so just standing in the light is just as bad as holding a light source yourself.
(now, instead of AC and stealth+casting penalty, armor will have only AC and stealth penalty. perhaps chain and plate will get the same penalty, even(cut stealth by half?), and then plate will get Shiny on top of that. remember to add a tip for Shiny.)
Weak spot (enemies get +10% crit chance while you're wearing this armor). might be inflicted by swordsmen etc.
Spored - inflicted by the bloat enemies when they explode on you. after X turns, if you have any spored armor, more bloats will spawn. also has a secondary effect. (maybe a message to warn of imminent spawning?) Does fire remove spores too?
Give the player a "vulnerable" or "takes more damage" status for 1 turn when switching armor, so it's risky to do when something is actually hitting you.
Maybe heavy armor should give a penalty to dodging spell-like (elemental) ranged attacks? -that should do it

WEAPONS: why use a mace against golems? your sword can be blunted!
	-perhaps blunted should be the opposite of a crit: minimum damage, i.e. 2 damage.
sticky: can get stuck to monsters when you hit them. you can't make attacks until you step away from that monster to unstick the weapon.
heavy: chance of exhaustion after swings.
negated: enchantments don't work.

MONSTERS:
some monsters should become territorial and not rush over to you when they see a torch flicker.
wargs will get a howl. what will it do? perhaps they'll split up. more likely it'll be used when some of them can't reach you, and increase crit% for a turn.
hags will be tweaked a bit, probably getting some new curses.
	-might keep light sensitivity. keeps curse weapon, and gains heavy weapon curse too, so you don't know which
	 will happen. probably keeps aggravate but loses drowsiness.
shadow(veil) could gain a message when it steps from visible light to visible darkness: "fades from view as it steps into the shadows" - cooldown on this msg?
mechknight now blunts edged weapons (it's metal! warmachine is too.)
golem becomes a shallower monster, since it's less scary than mechknights and warmachines.
maybe assassins need a combo, too. the first hit silences for 1-3 turns, the second hit is a lunge?


You'll probably start with 5 bandages, and the game won't generate any more.



ADDITIONS:

slime: moving/attacking while on slime has a 1/3 chance to fail. on a
        failed attack, you fall and get slimed: 50% chance to fail
        to use an item, and drop it instead. other stuff too.
cracked walls: destroyed by brutish strength, grenades, or blast fungus
                (and not just adjacent). can appear between rooms.
		i'm pretty sure knockback should break these too. throw
		your enemies through them to open them up.
brush: flammable. blocks LOS to anything not in the same patch of brush
bell-like object: bashing-type attacks will stun and/or damage guys on
                   the other side, while making noise. conducts elec.
ropes connected to ???
slime pods that spread slime around
spinning pillar axe traps(like in trap RL)
those back&forth guys from zelda, but elec dmg changes their direction.
'beach ball bloats': take bloats from brogue and make them a bit tougher by having bashing attacks send them flying instead of popping.
add broguelike "you are in tall grass" descriptions. it'll be nice.
monster that pushes everything away when it takes damage. (deals damage too?) probably an artificial being or an assassin.
enemy that ONLY wakes when you get near, or when you fight near it, ...
-a monster that charges up and fires. maybe just once. -maybe the lightning rift idea? charges up, throws a lightning rift that increases its radius each turn. if something is in the radius, it zaps it. the enemy could also have the "when damaged, release electricity" thing. Would make a good boss.
blind monster that uses aoe attacks when it hears sounds.
advanced combo traps on later levels? darkness + summon shadows/shadow duelists/other.
 -actually, this should only be an increased chance for these traps to be near each other.
monster with a gravity field that stops arrows and thrown items, and makes your weapons act like they're Heavy.
sleep effects that aren't magical drowsiness
a trap that spawns multiple bloat-type enemies nearby?
"can't attack in radius X" effect - possibly terrain-based but rare to activate? like an altar activated by zealots?
	-the monster-activated idea is cool, but here's another version: an altar of peace or pacifism. if you fight next to it, it activates and prevents combat.
trap of move traps? would hide & relocate nearby traps.
jungle terrain type - blocks LOS, doesn't burn. kinda the same as permanent fog, without the miss chance?
a quiet terrain type that reduces noise values by 2(?)
basic magical(?) effects for terrain: increased damage (both ways, probably!) and/or increased accuracy, 
wallmaster-like monster that can't go farther than one space from a wall. (is it too similar to mud tentacles?)
a monster that anivia-walls you. bone wall, sand wall, snow or ice wall?
ooh, tether effects are nice. you have to get out of range to end whatever the effect is.
an enemy that deploys an immobile minion
an enemy with 2 different forms, probably a druid of some kind.
a fast enemy that leaves a poison trail and can fling you backwards (mix mix swirl mix)
hidden mushrooms that poison, slow, and make noise, and only appear on certain levels
a dungeon feature that heals (and buffs?) a nearby target that falls under 20% health.
enemies with single-use abilities, like a buff that makes its next 3 attacks rather nasty. (you'd want heavy armor vs. those)
monster that steals & uses items.
pressure plates? not the trigger-once kind that brogue has, but the kind that keeps a door open as long as something is on it.
a red-light-green-light sort of monster/totem/etc where you don't want to move sometimes. making AI handle it is the annoying part.
an enemy that haunts an area after you kill it, either buffing enemies or debuffing you.
several idols/totems/whatever that spawn in a group, with LOS and LOE to each other one. Each turn, or every few turns, a bolt of magic would go from one to
	another, hitting anything in the way. (when this happens, a new magic bolt will form in a few turns. the idol changes color to show this.)
		-again, AI is the problem here. i'd want them to consider it slightly dangerous. however, if it was radius 1, the player couldn't just fight them
	-make this feature not attackable, but vulnerable to brutish str.
yet another way to move from one room to another: rotating walls that activate when you stand on them. nice alternative to searching.
terrain that (occasionally, or when triggered) releases a flood of water? it doesn't last long, but moves items and puts out fires. might remove slime and grease
more medium-strength healing, probably a terrain feature
rooms with solid rock pillars in the center & L-shaped rooms should be added as a post-step
magic crystal terrain type - they pulse and restore mana. Might also cause 'magical contamination' like in crawl, so you can't use them forever.
blood crystal terrain type - when living enemies die near it, it beats faster. when it beats, nearby entities become enraged(?).
more traps that, like the sliding wall trap, depend on the shape of their surroundings - this one would cause spikes to appear from the nearby walls for a few turns. Could be useless, could be awful if you're in a corridor.
fire-vulnerable monster? 
a taunting monster that draws everything closer, as a counterpart to the new banshee scream.
scalding oil trap
a koopa enemy: hit it once (or enough) and it goes into shell mode. hit it again and it flies through enemies, damaging and/or knocking them away
	-problem: other knockback doesn't work like this
forasect eggs in hives? when you step next to them, they start hatching. takes several turns. can be attacked, or possibly just burned.
	-forasects shouldn't trigger hatching, but maybe other hatching eggs do
antimagic gas?
an effect that makes a monster burst into flame when it dies - overlap with cultist?
demon healing pools - take permanent damage but heal to full?
a terrain type on which attacks can't miss?
some sort of tiki torch, but bigger so it blocks movement - a torch that you can see through and knock over like a barrel, and it sets stuff on fire. hmm.

potential monsters for the next version:
something that always knocks you back
something that does permanent damage (resting & enduring soul don't help, healing does)
something that spawns a different monster when it dies
something that is fast and stealthy
something that has uncanny dodge
something that has drive back
something that becomes terrifying on crit
something that has an outer layer which you can crack (mace?) and then it becomes fast
something that is restricted to its terrain type but can spread it toward you









plate & chainmail could give a penalty on certain terrain
remember to make the player vulnerable (to damage or to crits?) for a turn when switching armor.


note to self: use RGB lights in a 7drl sometime










warg: perhaps they could split up a bit more, and howl to summon the
  others. it might even have other effects - a warg that can see the
  player but can't reach might howl to increase the deadliness of any
  wargs that DO attack the player on the next turn.
hag: possible reduction of HP? however, it should still be hard to kill
  her in one hit without use of resources/terrain.
golem: what if it created stalagmites when struck, too, and could also
  move through(and destroy) them? it'd make kiting harder.
	-also consider reducing radius of rubble on death
assassin: better AI. another ability? or is it not needed? poison?
mknight: rename to clockwork knight? No, but maybe 'mechanized knight' or 'something automaton' or 'somethingforge knight'

likely additions?
maybe:
back & forth spike enemies from zelda
enemy that stays on top of a source of healing
monster that puts you to sleep and spawns dream eaters nearby
beamos guy

probably:
assassin or artificial guy that pushes everything away when it takes damage
blind enemy that does AOE attacks if it hears stuff
monster that lays eggs that burst with acid or slime
	-behavioral monster. seeks the closest spot 3 tiles away from any egg. slow. leaves an egg behind as it leaves that tile. eggs are monsters that hatch in a few turns. when they hatch, there's a splash of acidic slime(?) - but what hatches?

ideas without a monster:
crit effects: refresh cooldowns, make noise, fog, grow plants, attack link, fear, steal
staying in terrain of choice
anything that uses adjacency to walls, or other terrain types


new enemies:
enemy that stays in a gap in the wall and is hard to kill without removing - maybe it has a source of healing?
more effect-on-death enemies? especially ones that leave enemies or terrain behind.
  a predator(heh) that can't see you if you're slimed
  a mostly-invulnerable monster that can be trapped or destroyed by terrain
  a monster that puts you to sleep and spawns dream eaters. you'd want to fight them with other monsters nearby!
  egg layer. eggs burst with acid or slime or whatever.
  almost-beamos enemy. rotates each turn(visible upon examination). when you(or an enemy?) step within 2-3 tiles, it activates. it hits an entire quadrant or octant at a time, and goes through all the directions. if you're still within the distance, it resets the timer each turn.
a monster, possibly inanimate or immobile, that guards important places on the map, including shrines, chests, healing pools.
totem- and turret- type monsters. (totems are probably associated with a monster type. turrets stand alone.)
 -a cultist totem would be a nice upgrade to them. 
 -one that freezes the nearest. could also be terrain.

a monster with animated sword & shield. shield is just HP, and positions itself between it and you. sword makes attacks while everything is in LOS. both return to the owner when defeated and can be animated again.


  AND! lots of behavior-based monsters. maybe they hang out near doors,
       or guard corridors or shrines, or hide in brush, or trigger
       traps when the player gets near(hey, not bad), or like to drink
       potions or kick orbs.



terrain types: lots more!
  ropes that can be cut (by slashing) to do ???
  plant pods or something else that can be smashed to do ???
  balloonlike objects that can be slashed or pierced to do ???
    slime pods/balloons/sacs/bubbles!
  reverberating objects. bash to stun and/or dmg guys on the other side
    and make noise, of course...and conduct electricity.
  moving traps: spinning, back&forth, etc.
  those eye symbols from zelda. shoot them with arrows.
  the torches from zelda. light them all.
  one-way wind corridors. push items and monsters, affect fire, i dunno


wandering wizard, 'h' that gets 3 random spells. or rather, 3 random spells out of the list of spells I can figure out how to make AI for.



ropes that can be cut or burned, but not shocked or bashed (unless maybe frozen first).


     ...................... really these would all be '&' of various
     ...................... colors, but here '!' is the trigger and
     ...................... '^' is the part that attacks.
     ........&&&...........
     ........^.&&&^........ but anyway, the plant gets generated like
     ..........*........... this. it's quite similar to corridor gen, 
     ........&&&.&!........ really. it starts from a center ('*') and
     .......!&.&&&......... spreads out a bit in any direction. 
     ............&^........ 
     ...................... each endpoint becomes a trigger or an 
     ...................... attacking part, randomly. (but there must
     ...................... be at least one of each)
     ......................
     ...................... it's functional, too, in that it can be
     ...................... burned but it doesn't hide you from view.
     ...... ............... -----------------
     ....#----#............ what can i do with ropes? this is tricky.
     ...................... here I have a tripwire. i don't think I can
     ...................... use this one yet.
     ...................... -----------------
     .........*............ here's a plant.
     ......................
     ......................
     .........*............
     .........#............
     .........##*.......... here's the same plant one turn after
     .........#............ sunlight hits it.
     .........*............
     ......................
     ...*...*.*.*##........
     ...#...#.#...#........ and the same plant after several turns.
     ...#...#.######*...... 
     ...#...#.#.#.......... (algo: each turn, pick one end section. 
     ...#######.####*...... it has a separate 50% chance to grow in
     .......#.....#........ each valid direction. always 2 tiles at a
     .......##*...*........ time.)
     ......................
     ...................... (when sunlight goes away, reverse it like
     ...................... this: each turn, pick one end section.
     ...................... find the stalk it's connected to and remove
     ...................... the plant 2 spaces in that direction. if
     ...................... the 2nd one has only one stalk adjacent, it
     ...................... becomes an end section.)
     .....******........... ------------------
     .....*****............ from brogue: dense foliage that you can
     ......................  trample.
     ...................... ------------------
     ....,,,,,..,,,,....... glowing fungus patches
     ....,,,,,,,,,,........ 
     ..........,,,.,....... 


level gen that uses a heightmap of sorts - high ground becomes normal rooms, low ground (near the edges of the map) becomes jungle, or ruins, or caves.

[[
an intimidating screech/roar/etc that reduced defense/increases damage taken for a few turns. possibly on a fast enemy. would
play well with other monsters too.

an attack-reducing enemy, possibly immobile. Like, if this guy didn't do much damage, but made you deal less damage too (by
glaring or leering or whatever), you wouldn't want to fight near it.

a "knock everything back" wind effect, with some randomness. maybe not.

spikes or caltrops. cause damage, and have a chance to disappear each time.

more slime (the status not the terrain)

earthquake dude that has a chance to knock down walls and/or make rubble

duo/trio monsters of different types. always appear together. maybe a gemini light/dark thing, i dunno. probably smth else.

more terrain that changes (somehow)

------

prototype trap: if there's a monster on its tile when triggered, it copies that monster's stats. it'll produce several berserk clones, one at a time, with several turns between. -- actually, this shouldn't be a trap. it should be a rare feature.

03:56 < ds_creamer> Weak point (armor status): Enemy attacks against you in this armor have +10% crit chance.
03:59 < ds_creamer> Worn[needs a name change?] (armor status): [If an enemy critically hits you, this armor becomes Damaged.] 
                    OR [If this armor would gain Worn status again, it becomes Damaged.]
04:00 < ds_creamer> Damaged (armor status): You get no Defense for this armor and attacks get +10% crit chance.

                     
------

a monster that charges its power somehow when it moves - encourages you to walk up to it

did I not have 'steal item' on the crit effect list?

plant-based life drainer? tied to its growth? (maybe it grows if at full health)
	-immobile, and fairly weak, like 15-20 hp. drains life. if it drains life while at full health, it spawns another. very easily killed with arrows, huh?
]]

fix Parabola: Redraw(), and everything else, shouldn't draw in the last screen position.



###############
#####....###### <--for round rooms with even dimensions, calculate the room for dim-1 and 
####......#####       then include each position, plus the positions to the E, S, and SE.
####......#####
####......#####    (same result as calculating it 4 times)
####......#####
#####....######
###############

###############
###############
######...######
#####.....#####
####.......####
####.......####
####.......####
#####.....#####
######...######
###############
###############
###############






okay, I did the automatic r/c/N/E/v/h/i function. it works great, but the corner definition should be updated to allow 2x2 rooms, basically. this allows corners to touch. also, edge definition should allow 2x3 rooms:
cEc
cEc


room shapes:
rectangular
  min: 3x3
elliptical
  min: 5x5
diamond
  min: 5x5
triangular
  min: 5x5
L-shaped
  min: 6x6
cross-shaped
  min: 7x7
alcoves(2x2 holes on sides of room)
  min: 9x9

room features:
rooms with walls in the center. should leave at least 2 spaces on each side.


	########	########	########	     ###
	#......#	##....##	###..###	    ##N#
	#......#	#......#	##....##	   ##NN#
	#......#	#......#	#......#	  ##NNE#
	#......+	#......+	#......+	 ##NNrE+
	#......#	#......#	##....##	##NNrrE#
	#......#	##....##	###..###	#NNEEEc#
	##+#####	##+#####	##+#####	##+#####
							


	########	########	########	########
	#......#	#......#	#......#	###..###
	#......#	#.#..#.#	#......#	###..###
	#......#	#......#	#..##..#	#......#
	####...+	#......+	#..##..+	#......+
	 3x3...#	#.#..#.#	#......#	###..###
	   #...#	#......#	#......#	###..###
	   #####	##+#####	##+#####	##+#####
	at least 3x3?					


bigger!

	#############	#############	#############	#############
	#####...#####	######.######	#...........#	#######.....#
	###.......###	#####...#####	##..........#	#######.....#
	##.........##	####.....####	###.........#	#######.....#
	##.........##	###.......###	####........#	#######.....#
	#...........#	##.........##	#####.......#	#...........#
	#...........#	#...........#	######......#	#...........#
	#...........#	##.........##	#######.....#	#...........#
	##.........##	###.......###	########....#	#...........#
	##.........##	####.....####	#########...#	#...........#
	###.......###	#####...#####	##########..#	#...........#
	#####...#####	######.######	###########.#	#...........#
	#############	#############	#############	#############
		       4 possible doors 


	#############	#############	#############	#############
	#...........#	#...........#	#...........#	###.##.##.###
	#...........#	#.#.#...#.#.#	#...........#	###.##.##.###
	#...........#	#...........#	#...........#	#...........#
	#...........#	#.#.......#.#	#...#####...#	###.......###
	#...........#	#...........#	#...#####...#	###.......###
	#.....#.....#	#...........#	#...#####...#	#...........#
	#...........#	#...........#	#...#####...#	###.......###
	#...........#	#.#.......#.#	#...#####...#	###.......###
	#...........#	#...........#	#...........#	#...........#
	#...........#	#.#.#...#.#.#	#...........#	###.##.##.###
	#...........#	#...........#	#...........#	###.##.##.###
	#############	#############	#############	#############
							no, see below.

	    #####	     ###	#############	      #######
	  ###...###  	    ##.##	#...........#	      #.....#
	 ##.......## 	   ##...##	##..........#	      #.....#
	 #.........# 	  ##.....##	 ##.........#	      #.....#
	##.........##	 ##.......##	  ##........#	#######.....#
	#...........#	##.........##	   ##.......#	#...........#
	#...........#	#...........#	    ##......#	#...........#
	#...........#	##.........##	     ##.....#	#...........#
	##.........##	 ##.......##	      ##....#	#...........#
	 #.........# 	  ##.....##	       ##...#	#...........#
	 ##.......## 	   ##...##	        ##..#	#...........#
	  ###...###  	    ##.##    	         ##.#	#...........#
	    #####    	     ###     	          ###	#############


	#############	  #########  
	#...........#	  #.##.##.#  
	#...........#	###.##.##.###
	#...........#	#...........#
	#...#####...#	###.......###
	#...#   #...#	###.......###
	#...#   #...#	#...........#
	#...#   #...#	###.......###
	#...#####...#	###.......###
	#...........#	#...........#
	#...........#	###.##.##.###
	#...........#	  #.##.##.#  
	#############	  #########  
			no, use the one below:
	#############	#############
	#...........#	###..###..###
	#...#...#...#	###..###..###
	#...........#	#...........#
	#...#.#.#...#	#...........#
	#...........#	###.......###
	#.#.#...#.#.#	###.......###
	#...........#	###.......###
	#...#.#.#...#	#...........#
	#...........#	#...........#
	#...#...#...#	###..###..###
	#...........#	###..###..###
	#############	#############
			much better!


	########################
	#......................#
	#.#..................#.#
	#......................#
	#.#.#...#......#...#.#.#
	#......................#
	#......................#
	#......................#
	#.#.......#..#.......#.#
	#......................#
	#......................#
	#......................#
	#.#.#...#......#...#.#.#
	#......................#
	#.#..................#.#
	#......................#
	########################


not yet:
traps incl. on chests and doors, or alarms on items.
double doors for fortresses - easy
candlelit altar. like a solid fire pit. maybe radius 2.
torches
mirrors
levers
wind (works like conveyors)
rocks
mud
tunnels that allow travel to possibly-disconnected parts of the level. would remove you from the map for several turns. 


single-use (or one-way) corridors
2- and 3-wide corridors, with possible statues or other features

round rooms
diamond rooms
triangular rooms
rooms with rectangular sections missing from a corner (the easy way to do 'combined' rooms)
rooms that aren't carved out in the middle (i.e. a large central 'pillar')
'starburst' rooms, maybe
this type of room: (even dimensions in both directions, and at least 6x6)
  ########  
  #..##..#  		  ####
###..##..###		 ##..##
+..........#		###..###
#..........#		#......#
###......###		+..@...#
###......###		###..###
#..........####		 ##..##
#.............		  #.##
###......######		  #.#
###......###		  # #
#..........#
#..........#
###..##..###
  #..##..#  
  ########  


slime levels: lots of elliptical rooms. pools and streamers/trails of slime. fog or poison gas vents. enemy type: slimes or slug-men or something

hive levels: 3x3 rooms only, no doors. corridor numbers 4 4 1 4 4. GenerateInitial, then generate (50/50) rooms and corridor chains, 700 times. Do standard cleanup and verification. enemy type: some kind of insect, or hive dogs
	-no firepits, fire geysers, ....

fog levels: ???. lots of fog vents. enemy type: phantoms. (probably spawns 2-3 phantoms for every replaced monster)

mine levels: normal levels turned into caves. rubble. enemy type: kobolds.

more: moving parts? corridor features? carve rooms for chests in caves?

LEVEL LIST:
terrain types to keep in mind: fire pit, stalagmite, rubble, fire geyser, healing pool, fog vent, poison vent, water, ice, cracked wall, brush, poppies, jungle, gravel, blast fungus, glowing fungus, tombstone(+grave dirt), oil, slime, fog, teleportals
barrels of oil that you can attack to push, woohoo
(statue, door, stone slab)

NORMAL:
rooms & corridors!
terrain:
common - statue (but not super common)
uncommon - fire pit(random), lit room, pile of rubble, cracked wall, brush(or common?), gravel
rare - healing pool, pool of water, ice(?), tombstone

SLIME:
elliptical rooms with wide corridors between them. use dijkstra to find good spots for pools of slime.
terrain:
common - slime!
uncommon - vents, water, cracked wall
rare - healing pool

HIVE:
3x3 rooms with short corridors, tightly packed. (needs something else! maybe wax walls that melt.)
terrain:
common - 
uncommon - cracked wall
rare - jungle?!?

FANCY:
like a normal level, maybe with bigger rooms. lots of statues.
(altars instead of fire pits. healing pools uncommon instead of rare? pools of water. poppy rooms (fills center of room). teleportals rare. flammable carpets? torches, lit rooms, all that stuff.)
terrain:
common - statue, lit room, carpet
uncommon - healing pool, altar, pool of water, poppies
rare - teleportal

MINE:
incomplete normal level, with dead end corridors and cavelike rooms.
terrain:
common - fire pit (placed randomly, not evenly), gravel
uncommon - rubble, vents, water, cracked wall, blast fungus, brush
rare - glowing fungus, barrel of oil,tombstone


FORTRESS:
like a normal level symmetric over the X axis, and with a central hallway.
terrain:
common - gravel
uncommon - fire pit (even?), water pool, barrel of oil, lit room, statues
rare - healing pool

CAVE:
made with cave generator, not rooms & corridors. no doors.
terrain:
common - stalagmite(?), brush, glowing fungus
uncommon - rubble, vents, water, ice(?), gravel, blast fungus(?)
rare - fire geyser, healing pool, tombstone
	-fire geysers could appear in clusters, with very few safe zones. a bit like brimstone.

FOG CAVE:
a more rounded cave, possibly with even more stalagmites & glowing fungus.
terrain:
common - stalagmite, glowing fungus, fog vent
uncommon - rubble, pool of water, ice
rare - healing pool, jungle(?!?)

GARDEN:
big normal rooms (often tall or long instead of big in both dimensions), often filled with brush(of the same color, eh?), poppies, or any other plants I come up with, or pools of water. Maybe some water on the outer part of some rooms too. lots of statues but no pillars or fire pits.
terrain:
common - statue, brush, poppies, water, lit rooms 
uncommon - healing pool, gravel
rare - 

GRAVEYARD:
perhaps a fence terrain type that slows movement through it. rectangular and vaguely rectangular shapes with tombstones, many without grave dirt. lots of pillars (or big headstones).
terrain:
common - cracked wall(?), brush, tombstone, statue
uncommon - gravel
rare - pool of water, blast fungus

new terrain part 52155t3:
giant flowers? they block LOS and movement, and have 4 petals(?) in cardinal directions that also block LOS and movement. attacking the flower makes it close for several turns.
randomized/triggered lights of some kind
rotating floors
one-way gates (bump to open from one direction only, close in X turns? or stay open?)
bloodroot/corpseroot/etc. blocks movement (not sure about LOS). monsters dying adjacent to it cause it to grow. (awkward as-is because it could block you in)






#                                                      #
# remember to use some colored walls in here somewhere #
#                                                      #

rarities?

normal slime hive fancy mine fortress cave fog garden jungle rocky graveyard

common: normal, mine, cave
uncommon: slime, hive, fancy, fortress, fog, garden, jungle, rocky, graveyard
OR
uncommon: slime, hive, fog, garden, rocky
rare: fancy, fortress, jungle, graveyard

!!!

schism changed in forays, update the other.

leveltype-specific monsters that can only appear in the proper "biome"
	-they get added to the list of possibilities, so a level type
	 isn't required to have any.

don't increase in power, but rather in number.

normal(none) slime(slugmen) hive(ants or hive dogs) fancy(none?) mine(kobolds) fortress(new armor-wearing race - alasi) cave(none) fog(phantoms) garden(none?) jungle(something awesome!) rocky(good question) graveyard(skeletons, or undead in general)





include a goal at the start	-	"None of the other scouts returned." etc


orc assassin needs an AI enhancement: when moving toward the player, if there is a spot that the player can't see (but it's at the same distance as the spot you would have stepped to), step there to stay out of sight.



new dungeon features:
trapped chests or doors?
torches
	-implemented as walls that actually shed light from an adjacent tile?
alarms tied to items or doors?
periodic stun trap that affects everything in its LOS
bombable walls to hide some hidden rooms.
more open areas. maybe even LoL-style brush?
  open areas make carrying a torch more dangerous, and make lightning bolt better
beamos-inspired mob/trap/feature. probably mounted in the wall. might hit an
  entire direction instead of just a line.
round rooms
any other active dungeon elements or 'moving parts'
some other features that can be found in corridors.
One-way and/or single-use corridors. (thanks to .orphle. in #br.gue)
sometimes, monsters should actually guard corridors

other:
an event (possibly triggered by shrines or chests) where you defend an area for a
  short while, for some purpose.
blind-in-darkness status to go with damaged-in-light.


#

considering a 'slimed' status that would put out fires but leave you clumsy or something. fire melts ice, ice freezes slime, slime douses fire. slime traps, slime enemies, slime orbs that you can employ to extinguish fires on yourself.
	-being on fire makes you immune to freezing, being frozen makes you immune to slime, and being slimed makes you immune to burning? sounds decent.
	-then i would add slime orb and orb of burning at the same time.
being slimed could give you a 50% chance to drop items rather than use them.

i think i've figured out slime:
	-any fire damage or catching fire breaks FROZEN.
	-any cold damage or being frozen breaks SLIMED.
	-FROZEN makes you immune to being SLIMED. SLIMED makes you immune to being on fire.
		being on fire makes you immune to being frozen.
	-walking on slime fails 1/3 of the time. The effect is identical to being stunned, 
		except that the message is "you slide" instead of "you stagger"
			-actually, no movement here.
	-attacking on slime has a 1/3 chance of making you fall into the slime. this doesn't
		affect your attack, nor does it take time to stand up, but it SLIMES you.
	-while SLIMED, any item you try to use has a 50% chance to be dropped instead. evil!

             
#

probably split all these into 0.7.1+ and 0.8.0.
then 0.9.0 can have ???, and 1.0.0 will be the final iteration.
		new terrain
		other balance changes
		and help check

-for the next version: item descriptions, slime and fog levels, leveltype-specific monsters, circular, diamond, and L-shaped rooms

in ForaysSuperClass: public ActorType ZOMBIE = ActorType.ZOMBIE;


things to do between 0.5 and 1.0:

at least 1 special level per game, with an appropriate number of different special levels
	-cave of bats

animations should support the concept of a 'viewer' - cells outside viewer's FOV don't animate.

generate trolls with rocks they can throw, in a lair, and have them stay in that lair.

Select() needs a rewrite, and to be moved out of Actor.

mirrors: can be generated when there is solid rock behind a wall.
		-or, if I wanted to generate them anywhere, I could have a can_be_reflection thing.
			then what you see depends on where you stand.
	-they just show what is opposite them. doesn't show vampires. doesn't show the player's reflection 
		if the player is shadow cloaked.

partial classes to separate AI from the rest of Actor

attribute indexing for actors! why didn't i think of this before? target[AttrType.CATCHING_FIRE]++; //does this work?

as a half measure toward state-based actions, perhaps "constant" checks could reschedule themselves right after each actor, rather than once per turn.

could the "state based effects" model be useful? it would check things like falling into chasms, setting things on fire, and teleportals, and could even be applied to dead monster removal (if I really wanted to change how that works)

animation utility method: when called on a list of positions, it checks whether the player can see all of those. Depending on the option you set, it'll either replace the ones you can't see with nothing, or with (-1,-1), which means it'll still take time but won't show anything.

new rejection criteria for schism!
1. must have a nonwall within X spaces from both left and right.
2. min/max number of rooms
plus, a corridor loop remover.

-also for schism: given a floor space, try to generate a room & a corridor that connects to that space. this could be used to add rooms to cave corridors, and also to add secret rooms or spaces for chests or statues in normal caves.

option to put stat window on right.

f-spells should be expanded to spells AND feats.

"you fade away in the darkness" should also appear when you put your torch away while shadow cloaked.

-update version number
-make 'trailer' vid

0.7.1+ should have:

"You are burned. You are unburnt." <--being attacked by burning enemy while Tough - this should no longer apply.
think about scaling Spirit's duration reduction to more than 50%
what about a 'default ranged attack' in addition to the 'default melee attack' spell?
extend the "monster notices" sounds so that you can hear them even if you can't see them.
	-this would make a good candidate for generalization: printing a message if the player can see an object OR if that object is within a certain distance. perhaps a distance that implies that the message is a sound, not a visual.

stack trace printed to file on fatal exception?

new wandering mode: tend to step in the last direction stepped, or one next to it.


-what about a fighting game inspired recovery mechanic, where you can recover most/all of the last damage you took, but nothing beyond that.

-write cave corridor & twisty cave article for RB. also possibly dijkstra maps part 2 with screenshots.

bugs: 
this bug PROBABLY exists, even if I haven't noticed it yet: If you move to a new level and end up in the same spot, the map will lose track of you until you move because the position is cleared last.
here's that really weird one where I got killed the turn I used a rune of time:
"Time stops for a moment. (grayed out)
You bring out your torch. The troll seer regenerates. The troll
seer casts glacial blast. The glacial blast hits you. You [more]
die. [more]"
visual bug for lightning bolt: when targeting past the target to hit it at an angle (when it's in a doorway, say), the bolt seems to go through walls.
minor: passage shows a WHITE floor under the player, not the correct color.
using lunge on an aware goblin archer a knight's move away. the archer appears normal, when it should have a green background from the targeting.
	-i believe this is another form of the other background color bug.
	-linux or win?
	-does not happen every time. this one might be a pain to track down.
again on linux - bits of the previous map still appear. no idea why. does not happen often. (once so far!)
	-not reproduced yet
"The skeleton looks less disoriented. " - no skeleton in sight.
	-reviewed code. should never happen, but it did.
		-theory: it died and the message was still printed. rework removal from msg_obj list.
			-happened again with "the skeleton looks more stable". debug the trap messages, then do the msg_obj fix.
		-above theory is probably wrong: happened with a goblin that was alive
			-yeah, this still happens. maybe the bug is in the 'forget about dead things' code in event.
"You fire an arrow. The arrow hits the cultist. The cultist [more]
dies."
	-note that the [more] takes up exactly as much space as "dies. " - what gives?
	-should be fixed!



--generate the list of monsters first, THEN generate the level. then verify that i.e. a troll has a proper lair.

the room mimic would really work better as a dungeon mimic - a boss level.

room mimic
	-how is this going to work? perhaps it's usually generated at the end of a longish corridor, so blinking out is harder to do.
	-it shouldn't ACTUALLY prevent teleportation escapes, though. a quick Passage out is probably just the thing.
	-perhaps some kind of interactive 'don't stand here' thing.
	-so, the event checks every several turns to see if the player is within its area(which is the entire room)
	-if this happens, it either sets some state, or spawns another event type to check again a few turns later(remember, there's a chest in here)
		-how about a good chance of an extra item or two, as well?
			-EITHER 1d3 items OR a chest?
		-wait, why not trigger on the chest, also? both will work great.
	-when the mimic has been disturbed, a message is printed, the membrane/door starts to close, and acid starts to fall.
		-and some of the walls and floor turn to red?
	-i think the average distance from chest to door will be like 3, so probably 2d2 turns.
	-if the player is on the door when it closes, he takes some damage and becomes immobilized. (and can then escape)
	-otherwise, the door becomes a membrane (would be great if certain terrain had ATTACKABLE flag, yeah?) with an okay amount of HP.
	-all the while, every 1d3 turns acid drops onto the floor from the ceiling - this is delayed by 1 turn, so it doesn't hit the player directly.
		-lasts for 1d3+3 turns or so
	-standing in the acid deals damage, of course.
	-ALSO, to prevent the player from simply dancing around until he gets out...the room should probably either shrink, or be subject to an area attack.
		-a crushing attack is way easier. lowish damage, i suppose.
	-annnnd, when the player escapes, the membrane soon returns to its door form and the walls and floors to their normal colors.

	-first, i need terrain for acid and membrane, no problem.
	-and an event for 'spawn acid here', no prob
	-now, what state do i need to track? the event already tracks the area, no problem.
		-'player inside room' - the first trigger. unneeded if i trigger only on the chest.
		-state for 'disturbed', of course
		-'number of turns until membrane closes'
		-state for membrane: closing, crushing, closed.
		-'number of turns until next acid attack'
		-'number of turns until next crushing attack'
		-'membrane has been destroyed' - could also just mean it's dead, and remove the event.

idea for the cultist's special level: a receptacle fills as cultists die to fire damage. you don't want it to fill up.
special level: giant pangolins tear open giant termite mounds. the pangolins use their armor to avoid harm as the termites swarm you.
battle of the titans special level: a brawl between titans that don't care about you. avoid being stepped on or destroyed by AOEs.
 <.agikm.> Maybe some wormlike creatures that would merge together and create more powerful variant of the same thing.
 <.agikm.> So you'd better just kill them one by one fast.



voltaic rapture was too badass
-this spell wasn't voltaic rapture, but was lightning-based: each time you're hit in melee you release a radius 2 burst of electricity

trap disarming that simply requires different actions. One requires you to '.' wait on 2 opposite sides. One requires you to run around it without stopping. One requires you to step on all the diagonals without stepping on any of the cardinal directions.
                                                   

secrets
silence
mystery
concealment

onslaught
battle
conflict
assault

protection
security
shielding
warding

heart
energy
will
essence

wizardry
sorcery
conjuring
evocation


