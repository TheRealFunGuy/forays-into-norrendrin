
move this note:
in a big(!) superhero RL, you could sometimes be unmasked instead of killed (especially by the cops). this would make the game much harder, but still winnable.

no items on shrines!

tutorial hints
	-weapon switching
	-armor switching
	-fire
	-recovery
	-movement
	-bump to attack
	-resistance

pack limit of 20? new carrying capacity trait?

move cultists and zombies down a few levels. find easier enemies for level 1.

lower HP for goblins? lower HP or damage for zombies?

why am i suddenly getting many 'notices' messages for groups, when I previously got just one?
	-i think this happens when they notice but the player isn't close enough
	 to 'makeNoise' and they follow the leader. hm.
		-no, following is not necessary. they do it when you step into LOS
		-group members should be alerted directly, then. do this.
			-done?

update help: add headers to overview help - 'Regaining Health, Attacking Monsters, Exploring the Dungeon...'
	-resistance is half damage

include a goal at the start

rename resting to 'catching your second wind' ?

TEST LOOKMODE AND NEW TARGETING ON LINUX BEFORE RELEASE

new code:
brutish strength
	-smash known traps, stalagmites, doors, statues. anything useful?

done(maybe):
smoke feature
armored enemies have different miss message
shadow cloak
fungus feature - will they spread at all?
mimic event - just needs a mimic monster.
spell disruption - radius-based only.
magical sleepiness
poison gas feature
fire vent tile
quickfire orb	
shadow cloak item
smoke bomb: self-targeting would be nice to have.
rune of time (gives a free turn)


new items:
potion of brutish strength
  no items, spells, or certain feats, but lots of damage and the ability to smash
  doors, statues, and other features?
explosive fungus orb-type item? or orcish grenades?


(rat) goblin large_bat shambling_scarecrow skeleton cultist poltergeist zombie wolf frostling goblin_archer goblin_shaman swordsman dire_rat dream_warrior banshee warg robed_zealot skulking_killer carrion_crawler ogre shadow berserker orc_grenadier phase_spider stone_golem necromancer troll lasher_fungus orc_warmage corpsetower_behemoth (fire_drake) skeletal_sabertooth luminous_avenger crusading_knight entrancer shadowveil_duelist mimic deranged_ascetic/unhinged_ascetic/chaos_monk chaos_fairy/chaos_pixie/dissonant pixie/chaos_moth/chaos_butterfly troll_soothsayer mechanical_knight marble_horror/granite_horror pyren_archer mud_elemental orc_assassin cavern_witch vampire compy noxious_worm PLACEHOLDER_1 PLACEHOLDER_2

 -- Instead of picking a number for HP, I'll instead pick low/med/high and adjust for depth -- 
 -- melee damage will work the same way. -- 

(skeletal horse)
skeletal sabertooth!
fast. (medium health, medium damage. These will be assumed from now on, if not stated).
elemental resistance. slashing and piercing resistance. undead. darkvision. wait, is this guy going to be just a fast skeleton(with better stealth detection)? increase damage a bit.

luminous avenger
fast. lowish HP. permanent holy shield. gives off light. when severely injured, darkens the level to fully heal.

crusading knight
med-high health. strong slow attack. torch. heavy armor. if attacked but unable to see attacker, lights the level.

entrancer
low health, low damage. always wanders. upon encountering a non-group monster, it enslaves it. in combat, the entrancer increases its servant's strength, regeneration, speed...
ranged attack?

(shadow-cloaked duelist)
shadow cloak. upon attacking, moves to a space that's adjacent to itself & the player. prefers orthogonal directions.

mimic
appears to be an item until it attacks. low-med health, low-med attack. slow. successful attacks grab their target.
(grabs usually work both ways and prevent normal movement. any OTHER movement breaks the grab.)

(spell disrupting fighter)
'raving/babbling/mad/ranting/frenetic/aberrant/demented/deranged/lunatic/psychotic ascetic'
or possibly 'chaos monk'
prevents casting within a short distance.

(spell disrupting pixie)
i might unify the concept as a 'chaos' effect. otherwise it'll have a different msg than the monk
prevents casting within a short distance. small, flying. either fast OR it moves like a bat(probably fast, because bats tend to take a long time to reach you). definitely attacks like a bat.

troll magician/seer/soothsayer/etc.
(same stats as troll.) might be able to cast glacial blast and sonic boom, but doesn't keep distance. when injured enough, teleports the player away (once?).

mechanical knight / clockwork knight / other
low HP. its shield makes it invulnerable to most attacks. Critical hits and sneak attacks still work, and the knight drops its guard if it misses on an attack. When a certain portion of its health is gone, its arms or legs will be destroyed. It can't use its shield without arms, and moves slowly while it has no legs.

marble horror / granite horror / etc.
in normal light, it is a statue indistinguishable from the normal dungeon feature. sunlight (from the spell, item, or trap) destroys it instantly. in darkness, it animates. construct, resists slashing & piercing damage & the elements. darkvision. Good candidate for the dim-vision touch effect, shrinking the player's vision radius while in darkness.

pyren archer
med-high health. weak attack + fire hit. fires flaming arrows. acts like an archer. possibly has a fire-related trick to use when cornered. immune to fire, of course.

mud elemental
low-med HP. resists all weapon types, i think. elemental attacks should work better.
if the player is next to any walls during the mud elemental's turn, those walls will grow muddy tentacles/hands/whatever and attack & try to hold the player.

orc assassin? even more basic than the skulking killer? (but more dangerous because it sneak attacks.) Needs an AI enhancement: when moving toward the player, if there is a spot that the player can't see (but it's at the same distance as the spot you would have stepped to), step there to stay out of sight. shadowsight?

(witch/hag)
(weak attack. stays at range. does one of 3 things: light allergy, magical sleepiness, immolate.
	-but that's the 5th monster that can catch you on fire! that might not be SO bad, but
	 this has other issues, too: if you have both curses already, does the witch immolate you
	 every turn? also, hags are fairly strong. start over on this one.)

(witch)
weak attack. stays at range. (some subtle form of damage at range? i'd like the witch to have a go-to damaging spell, and then:) ONCE, the witch can place a curse on the player. this tends to have a fairly long duration, up to 100 turns(?)
curses: light allergy, magical sleepiness, aggravate, ...

vampire (descriptive name?)
flying. somewhat fast? light allergy. destroyed by sunlight. drains life on hit (the damage doesn't matter; the vampire probably regains 10-20% health on a successful attack.)

procompsognathus (name? i wonder if i could just call them compys.)
small, low hp, weak attack. instead of rushing to attack, they stay back unless they're injured, or the player is below 40%(?) health. poisonous bite. (normal poison, or magical sleepiness?)

noxious worm
high hp. slow. breathes small clouds of poison every few turns. (could burrow into a wall and koolaid out when the player walks by. maybe.)





new monsters:
undead fast animal - summoned by necro
	-skeletal horse? melee beast plus resistances.
mechanical knight
  would be invulnerable until it misses. at certain hp values, its arms or legs
  fall off. "~'s arms fall off! ~ kicks you." with no legs, he does nothing.
  probably takes normal damage from crits, too.
statues - they're normal statues when in the light, but animate when in darkness.
shadow cloaked melee guy - sidesteps when he attacks.
  invisible in darkness, of course
luminous avenger
  fast, permanent holy shield, gives off light. when injured enough, darkens the
  level to fully heal.
crusading knight
  strong attack, heavy armor, & torch. if attacked from hiding, he lights the
  level.
mimic (item+event at first)
  if player is adjacent to item, check player's stealth. if noticed, attack. if
  player picks up the item, jump out of pack and attack.
antimagic melee guy
  not antimagic, but spell disruption. prevents spells from being cast within
  a certain distance, and also prevents spells that target it directly.
antimagic pixie
  fast, flying. not sure about attack.
(teleports player)
(stronger bow user)
  big ranged damage, but not fragile like most ranged guys
slugman
  appears in groups. leaves slime trails on the ground. usually moves slowly, but
  moves quickly when on a slime trail. ranged attack, maybe?
(magic reserve drainer?)
(on-death triggers? light, knockback?)
entrancer
  always wanders. when it encounters a non-group monster (maybe melee only), it
  enslaves it, adding it to its group, and will make it stronger in combat.
(darkness dweller repelled/dazed/blinded by light for a few turns)
mud monster
  makes walls attack or grab at you, encouraging you to fight it in the open
remake: poltergeist. item-thrower. can yank items from the player's pack.
	-doesn't throw mimic items (with do_not_stack == true)
(anything that doesn't care about how much damage you deal)

 1 goblin large_bat PLACEHOLDER_3
 2 skeleton cultist poltergeist
 3 zombie wolf frostling  4 goblin_archer goblin_shaman swordsman 
 5 dire_rat dream_warrior banshee 
 6 warg robed_zealot skulking_killer 
 7 carrion_crawler ogre shadow 
 8 berserker orc_grenadier phase_spider 
 9 stone_golem necromancer troll 
10 lasher_fungus orc_warmage corpsetower_behemoth

should be moved deeper:    cultist, poltergeist, zombie
should be moved shallower: wolf, swordsman, dream_warrior, skulking killer, shadow

COULD be moved deeper, maybe:    banshee, ogre, necromancer(depending on summons)
COULD be moved shallower, maybe: skeleton, frostling, banshee(yep), robed_zealot, berserker,
				 orc_grenadier, phase_spider, troll

 skeletal_sabertooth luminous_avenger crusading_knight entrancer shadowveil_duelist mimic deranged_ascetic/unhinged_ascetic/chaos_monk chaos_fairy/chaos_pixie/dissonant pixie/chaos_moth/chaos_butterfly troll_soothsayer mechanical_knight marble_horror/granite_horror pyren_archer mud_elemental orc_assassin cavern_witch vampire compy noxious_worm PLACEHOLDER_1 PLACEHOLDER_2

next step: diving the new ones into common/rare. 60% should be common.

common: sabertooth, asceticmonk, compy, noxious worm, duelist, pyren, mud_elemental

rare: entrancer, mimic, soothsayer, mechaknight, witch

either: avenger, crusading_knight, pixie, marble_horror, assassin, vampire, placeholder1 & 2

'upgrades' should appear at least 3 (if not more) levels deeper.

 1 goblin large_bat wolf skeleton ???
 2 swordsman ??? ??? frostling dream_warrior
 3 cultist ??? ?????????????
?????
  ??
?



new dungeon features:
doors -_-
normal statues
trapped chests or doors?
fungus (fuse fungus? bomb fungus?) that explodes a few turns after being lit up
doors that open when lit (stone slab type)
torches
	-implemented as walls that actually shed light from an adjacent tile?
fire vents/firespouts that occasionally burn things on top of them, and give off
  more light than firepits.
separate alarm from light trap
  alarms tied to items or doors?
add darkness trap
periodic stun trap that affects everything in its LOS
poison trap. darts or gas?
	-dart trap for dim vision?
ice trap?
sleep trap
bombable walls to hide some hidden rooms.
more open areas. maybe even LoL-style brush?
  open areas make carrying a torch more dangerous, and make lightning bolt better
beamos-inspired mob/trap/feature. probably mounted in the wall. might hit an
  entire direction instead of just a line.
round rooms
any other active dungeon elements or 'moving parts'
some other features that can be found in corridors.
deity statues. these would be colored instead of gray, and would have an associated event and terrain effect. the event simply checks the area and prints the appropriate descriptive message, then stops. the terrain effect depends on which type of statue it is. flat bonus to that skill? no, probably just set it to 10. that would lead to rooms where it's easy to hit & damage, rooms where it's hard to hit, rooms where magic is easy, rooms where magical/supernatural effects are diminished, and rooms where everything is stealthy. are there other good effects besides these?
anyway, these would appear near the center of rooms, and could replace the walls between shrines.
should rubble become nonopaque? that would allow me to put some along a corridor, making groups harder to fight there. (i could do it anyway, but the player would move it)
pillars, to match the shrine pillars.


other:
magical sleep status - lasts for a good while. any time you don't spend your turn
  moving, you might fall asleep, which lasts for a few turns or until you take
  damage.
sunlight (Shine now makes your torch give off sunlight) can destroy light-
  sensitive enemies outright
an event (possibly triggered by shrines or chests) where you defend an area for a
  short while, for some purpose.
light and dark sensitivity - i'm thinking blind-in-darkness and damaged-in-light.


#

considering a 'slimed' status that would put out fires but leave you clumsy or something. fire melts ice, ice freezes slime, slime douses fire. slime traps, slime enemies, slime orbs that you can employ to extinguish fires on yourself.
	-being on fire makes you immune to freezing, being frozen makes you immune to slime, and being slimed makes you immune to burning? sounds decent.
	-then i would add slime orb and orb of burning at the same time.


             
             Do what now?
                           #####
HP: 69                   ###...####       ############
Depth: 1                 #........#       #..........######
---                   ####........#       #...............#
Mace                  #...........#     ###..........####.#
---                   #.##........#      .................#
Leather               #.##........#       #..........##.#.#
---                   #.##........#       #..........##.#.#
             ##########.####.#.####   #########.##.####.#.#       #############
[paralyzed-] #........#.####.#.#      #....#  #...........#########...........#
[-stunned--] #....0............#      #....####.##.####.####......#.###.#.### #
[-burning--] #........#.####.######## #...................##..................#
[--afraid--] #........#.............# #.0..####.##.####.#.##......#.###.#.#####
[--slowed--] #^.........####.######.# #.........#  #  #.#......>........#.#
[--shine---] #........###  #.#    #.# #....######     #.####......#####.#.#
             ##########    #.#    #.# ###.##          #.#  ##.##.##  ##.#.####
                           #.#    #.#   #.#        ####.#  ##.##.#####.......#
                           #.######.#####.######   .....####.........#.......#
11                         #...................       #.@.......0..0.........#
12                         ####.###.##.##.#.####      ######.........#.......#
13                            #.............#              ###################
14                            ###############
             Depth: 1
---
(removed XP, level, and AC)

it's a stretch, but there might be room for EIGHT statuses at once. that ain't bad; let me see if I can reasonably get more than 8 at once...

conviction
boiling blood
regen
resistance (+immunity?)
detecting
counter for fail rate, sure.

[regenerate]
[-poisoned-]
[--frozen--]
 or
[-immobile-]
[--dimmed--]
[dim-light-]
[conviction]
[invincible]
[bloodboil-]


what about a 'blank' Event that takes a lambda? sounds great, but how the heck could I save/restore it?

#

make sure to always consider the old stuff when adding new stuff - it can use updates too, or receive some of these new ideas.

make sure there's a light-sensitive feature early on.

decide which changes should go into 0.7.0!
probably split all these into 0.7.0 and 0.8.0.
then 0.9.0 can have special levels, and 1.0.0 will be the final iteration.
	-well, so far i have:
		new map gen
		new monsters
		new items
		new terrain
		other 'light' features, including tweak to Shine
		other balance changes
		sidebar counters and stuff. for increasing bars like Conviction, or brogue-style bars for other durations.
		and help check

update your screenshots and videos!



things to do between 0.5 and 1.0:

at least 1 special level per game, with an appropriate number of different special levels
	-cave of bats

animations should support the concept of a 'viewer' - cells outside viewer's FOV don't animate.

generate trolls with rocks they can throw, in a lair, and have them stay in that lair.

consider making ranged attacks...not attacks at all, but generated straight from the AI routine

replace old spell?
	-should be easier with shrines!
		-maybe if you use a magic shrine, it gets replaced
		 with a 'spell replacement shrine' (purple)

shadow should reduce the light radius of zealots, too

Select() needs a rewrite, and to be moved out of Actor.


0.7.0 should have: (focus on gameplay)
many effects should use the new 'RefreshDuration', including shadow's touch attack, etc etc.
"You are burned. You are unburnt." <--being attacked by burning enemy while Tough
think about scaling Spirit's duration reduction to more than 50%
what about a 'default ranged attack' in addition to the 'default melee attack' spell?
fire drake should come with a quickfire event
	-not just a quickfire event, but the level should practically fall apart!
is the minimum number of enemies really 4? eww, too low.
	-it's actually 5.
	-spread them out more!
a stealth enemy that can teleport from shadows on ONE side of you to shadows on the OTHER side, and re-stealth while doing so.
	-limited somehow. does he need to escape first?
a group enemy that slightly punishes fighting in corridors?
things other than the player should be able to call MakeNoise
generate rats at start?
extend the "monster notices" sounds so that you can hear them even if you can't see them.
	-this would make a good candidate for generalization: printing a message if the player can see an object OR if that object is within a certain distance. perhaps a distance that implies that the message is a sound, not a visual.
kills list
'killed by' in highscore?
make shadows appear earlier? make swordsmen appear earlier?



bugs: 
minor: passage shows a WHITE floor under the player, not the correct color.
using lunge on an aware goblin archer a knight's move away. the archer appears normal, when it should have a green background from the targeting.
	-i believe this is another form of the other background color bug.
	-linux or win?
	-does not happen every time. this one might be a pain to track down.
again on linux - bits of the previous map still appear. no idea why. does not happen often. (once so far!)
	-not reproduced yet
there still might be a bug related to being on fire and catching fire at the same time.
	-not reproduced
"The skeleton looks less disoriented. " - no skeleton in sight.
	-reviewed code. should never happen, but it did.
		-theory: it died and the message was still printed. rework removal from msg_obj list.
			-happened again with "the skeleton looks more stable". debug the trap messages, then do the msg_obj fix.
		-above theory is probably wrong: happened with a
		 goblin that was alive
stalagmites, because they are solid, leave UNLIT tiles next to fire pits. simple enough to check as a one-off hack.
lashers can still move somehow, probably by pathing.
	-not reproduced
"You fire an arrow. The arrow hits the cultist. The cultist [more]
dies."
	-note that the [more] takes up exactly as much space as "dies. " - what gives?



--generate the list of monsters first, THEN generate the level. then verify that i.e. a troll has a proper lair.
	-now i'm not sure i want trolls to be confined



	-something for cultists to summon - this should be on a special level though, and it would be badass.
		-summoning circles and all


room mimic
	-how is this going to work? perhaps it's usually generated at the end of a longish corridor, so blinking out is harder to do.
	-it shouldn't ACTUALLY prevent teleportation escapes, though. a quick Passage out is probably just the thing.
	-perhaps some kind of interactive 'don't stand here' thing.
	-so, the event checks every several turns to see if the player is within its area(which is the entire room)
	-if this happens, it either sets some state, or spawns another event type to check again a few turns later(remember, there's a chest in here)
		-how about a good chance of an extra item or two, as well?
			-EITHER 1d3 items OR a chest?
		-wait, why not trigger on the chest, also? both will work great.
	-when the mimic has been disturbed, a message is printed, the membrane/door starts to close, and acid starts to fall.
		-and some of the walls and floor turn to red?
	-i think the average distance from chest to door will be like 3, so probably 2d2 turns.
	-if the player is on the door when it closes, he takes some damage and becomes immobilized. (and can then escape)
	-otherwise, the door becomes a membrane (would be great if certain terrain had ATTACKABLE flag, yeah?) with an okay amount of HP.
	-all the while, every 1d3 turns acid drops onto the floor from the ceiling - this is delayed by 1 turn, so it doesn't hit the player directly.
		-lasts for 1d3+3 turns or so
	-standing in the acid deals damage, of course.
	-ALSO, to prevent the player from simply dancing around until he gets out...the room should probably either shrink, or be subject to an area attack.
		-a crushing attack is way easier. lowish damage, i suppose.
	-annnnd, when the player escapes, the membrane soon returns to its door form and the walls and floors to their normal colors.

	-first, i need terrain for acid and membrane, no problem.
	-and an event for 'spawn acid here', no prob
	-now, what state do i need to track? the event already tracks the area, no problem.
		-'player inside room' - the first trigger. unneeded if i trigger only on the chest.
		-state for 'disturbed', of course
		-'number of turns until membrane closes'
		-state for membrane: closing, crushing, closed.
		-'number of turns until next acid attack'
		-'number of turns until next crushing attack'
		-'membrane has been destroyed' - could also just mean it's dead, and remove the event.

idea for the cultist's special level: a receptacle fills as cultists die to fire damage. you don't want it to fill up.
idea for pangolin special level: giant pangolins tear open giant termite mounds. the pangolins use their armor to avoid harm as the termites swarm you.
battle of the titans special level: a brawl between titans that don't care about you. avoid being stepped on or destroyed by AOEs.

voltaic rapture was too badass
-this spell wasn't voltaic rapture, but was lightning-based: each time you're hit in melee you release a radius 2 burst of electricity

secrets
silence
mystery
concealment

onslaught
battle
conflict
assault

protection
security
shielding
warding

heart
energy
will
essence

wizardry
sorcery
conjuring
evocation

